

<%= form_tag build_object_reports_path, method: :get do |f| -%>
  <div class="filter price">
      <%= label_tag :price %>
      <%= number_field_tag :price %>
  </div>
  <div class="filter area">
      <%= label_tag :area %>
      <%= number_field_tag :area %>
  </div>

  <div class="address">
    <div class="filter country">
  	<%= label_tag 'filter[country]', "Страна" %>
        <%= collection_select :filter, :country_id, Country.order(:name),:id,:name, include_blank:true %>
    </div>
    <div class="filter region">
        <%= label_tag 'filter[region]',"Регион" %>
        <%= grouped_collection_select :filter,:region_id, Country.order(:name),:regions,:name, :id, :name, include_blank:true  %>   
    </div>
    <div class="filter city">
        <%= label_tag 'filter[city]',"Город" %>
        <%= grouped_collection_select :filter, :city_id,Region.order(:name),:cities,:name, :id, :name, include_blank:true  %>
    </div>
    <div class="filter city">
        <%= label_tag 'filter[distinct]', 'Район' %>
        <%= grouped_collection_select :filter, :distinct_id, City.order(:name),:distincts,:name, :id, :name, include_blank:true  %>
    </div>
    <div class="filter city">
        <%= label_tag 'filter[street]', "Улица" %>
        <%= grouped_collection_select :filter, :street_id,Distinct.order(:name),:streets,:name, :id, :name, include_blank:true  %>
    </div>
  </div>

  <div class="details">
    <div class="filter ipoteka">
        <%= label_tag :ipoteka %>
        <%= check_box_tag :ipoteka %>
    </div>
    <div class="filter object-type">
        <%= label_tag :type_of_build_object_id %>
        <%= check_box_tag :type_of_build_object_id %>
    </div>
  </div>

  <%= submit_tag I18n.t("datgrid.form.submit", :default => "Подобрать").html_safe, :class => "submit-form btn" %>
<% end -%>

<table id="buildobjects-tbl" class="display">
<thead>
  <tr>
    <th>Цена</th>
    <th>Адрес</th>
    <th>Площадь</th>
    <th>Описание</th>
  </tr>
</thead>
<tbody>
  <% @build_objects.each do |buildobject| %>
    <tr>
      <td><%= number_to_currency buildobject.price %></td>
      <td><%= render partial: 'build_objects/address', locals: { model: buildobject.address} %></td>
      <td><%= buildobject.area %></td>
      <td><%= buildobject.description %></td>
      <td><%= link_to  build_object_path(buildobject) %></td>
    </tr>
  <% end %>
</tbody>
</table>